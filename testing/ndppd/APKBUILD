# Contributor: Anthony Ruhier <anthony.ruhier@gmail.com>
# Maintainer: Anthony Ruhier <anthony.ruhier@gmail.com>
pkgname=ndppd
pkgver=20170920
pkgrel=0
_commit="88b9bc561ce42f2eb97ea041cd8920797b44dd53"
pkgdesc="NDP Proxy Daemon"
url="https://github.com/navossoc/ndppd"
arch="all"
license="GPL-3.0-or-later"
depends=""
makedepends="linux-headers"
install=""
subpackages="$pkgname-doc"
source="https://github.com/navossoc/ndppd/archive/$_commit.tar.gz
	ndppd.initd
	"
builddir="$srcdir/$pkgname-$_commit"

build() {
	cd "$builddir"
	# work around parallel build issue
	make all
}

package() {
	cd "$builddir"
	make -j1 DESTDIR="$pkgdir" PREFIX=/usr install
	install -Dm755 "$srcdir"/ndppd.initd "$pkgdir"/etc/init.d/ndppd
	install -Dm644 "$builddir"/ndppd.conf-dist "$pkgdir"/etc/ndppd.conf
	install -Dm644 "$builddir"/ndppd.conf-dist \
		"$pkgdir"/usr/share/doc/ndppd/ndppd.conf.example
}
sha512sums="5be824404e100e03525a8bcd795b216456bc4d9c57e49c8f7e18a40af47f99e1bef365e7eb60193dd8bd3e552435125bbbca8192b8122b2808c1aa9d0acba538  88b9bc561ce42f2eb97ea041cd8920797b44dd53.tar.gz
3b049547ab2c239026abf2af8a3159c4cd66a5604fef0402e19ea2ed2adb25e73fab07d1198d1c3d0630bd12e859dd308efb230bacace7587becd0adade6b913  ndppd.initd"
